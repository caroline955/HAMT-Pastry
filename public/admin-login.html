<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Login - HAMT PASTRY</title>
<style>
:root{
  --bg:#f5e6e0;--panel:#fff;--ink:#2a2a2a;--muted:#7a7066;
  --btn:#5c3d1f;--accent:#6a4b2f;
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--ink);font:14px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh}

.login-box{background:var(--panel);border-radius:12px;padding:40px;width:100%;max-width:420px;box-shadow:0 4px 20px rgba(0,0,0,.1);border:1px solid #f0e8e0}
.logo{font-weight:800;font-size:24px;letter-spacing:1px;text-align:center;margin-bottom:10px;color:var(--ink)}
.subtitle{text-align:center;color:var(--muted);font-size:13px;margin-bottom:32px}

.field{margin-bottom:20px}
label{display:block;font-size:12px;font-weight:600;color:var(--muted);margin-bottom:8px;letter-spacing:0.3px}
input{width:100%;padding:12px 14px;border:1px solid #e0d5c9;border-radius:8px;font-size:14px;transition:border .2s}
input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(106,75,47,.1)}

.btn{width:100%;padding:14px;background:var(--btn);color:#fff;border:none;border-radius:8px;font-weight:600;font-size:14px;cursor:pointer;transition:all .15s;margin-top:10px}
.btn:hover{background:#4a3118;transform:translateY(-1px)}
.btn:active{transform:scale(0.98)}

.error{color:#c93a3a;font-size:13px;margin-top:10px;text-align:center;display:none}
.error.show{display:block}
</style>
</head>
<body>
<div class="login-box">
  <div class="logo">HAMT PASTRY</div>
  <div class="subtitle">Admin Dashboard</div>
  
  <div class="field">
    <label>Username</label>
    <input type="text" id="username" placeholder="Enter admin username">
  </div>
  
  <div class="field">
    <label>Password</label>
    <input type="password" id="password" placeholder="Enter password">
  </div>
  
  <button class="btn" id="loginBtn">Login</button>
  
  <div class="error" id="error"></div>
</div>

<script>
const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('loginBtn');
const errorDiv = document.getElementById('error');

loginBtn.addEventListener('click', async () => {
  const username = usernameInput.value.trim();
  const password = passwordInput.value.trim();
  
  if (!username || !password) {
    showError('Vui lòng nhập đầy đủ username và password!');
    return;
  }
  
  try {
    const response = await fetch('/api/admin/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password })
    });
    
    const data = await response.json();
    
    if (response.ok && data.success) {
      // Lưu thông tin admin vào localStorage
      localStorage.setItem('hamt_admin', JSON.stringify(data.admin));
      
      // Redirect to admin dashboard
      window.location.href = 'admin.html';
    } else {
      showError(data.error || 'Đăng nhập thất bại!');
    }
  } catch (error) {
    console.error('Login error:', error);
    showError('Lỗi kết nối server!');
  }
});

function showError(msg) {
  errorDiv.textContent = msg;
  errorDiv.classList.add('show');
  setTimeout(() => errorDiv.classList.remove('show'), 3000);
}

// Enter key to login
passwordInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') loginBtn.click();
});
usernameInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') passwordInput.focus();
});
</script>
</body>
</html>

